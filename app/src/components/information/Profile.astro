---
import Twitter from '../links/Twitter.astro';
import GitHub from '../links/GitHub.astro';
const { class: className, style: styleName } = Astro.props
class LocaledString {[locale: string]: string};
const name: string = "yoda";
const address: LocaledString = {
  jp: "首都圏",
  en: "Japan, Tokyo"
};
class DateString {
  date: Date;
  constructor(date: Date) {
    this.date = date;
  }
  getString(locale: string): string {
    if (locale === "jp") {
      return `${this.date.getFullYear()}年 ${this.date.getMonth() + 1}月 ${this.date.getDate()}日`;
    } else {
      return `${this.date.getFullYear()}-${this.date.getMonth() + 1}-${this.date.getDate()}`;
    }
  }
}
const updatedAt: DateString = new DateString(new Date('2024-08-12'));
const birthDate: DateString = new DateString(new Date('2000-12-10'));

const rowHeight: string = "height:33.5px";

const header: {[key: string]: LocaledString} = {
  title: {
    "jp": "Profile",
    "en": "Profile"
  },
  name: {
    "jp": "名 前",
    "en": "name"
  },
  year: {
    "jp": "年",
    "en": "year"
  },
  month: {
    "jp": "月",
    "en": "month"
  },
  belong: {
    "jp": "所属",
    "en": "belong to"
  },
  educationCareer: {
    "jp": "学歴・職歴",
    "en": "education and career"
  },
  education: {
    "jp": "学歴",
    "en": "education"
  },
  career: {
    "jp": "職歴",
    "en": "career"
  },
  awardPunishment: {
    "jp": "賞罰",
    "en": "award and punishment"
  },
  licenseQualification: {
    "jp": "免許・資格",
    "en": "license and qualification"
  },
  anythingelse: {
    "jp": "その他",
    "en": "anything else"
  }
};

const locale = Astro.currentLocale ? Astro.currentLocale : "en";
---
<style>
  @media print {
    body, page {
      margin: 0;
      box-shadow: 0;
    }
  }

  #page {
    background: white;
    color: black;
    display: block;
    margin-bottom: 0.5cm;
    padding: 60px;
    box-sizing: border-box;
    font-size: 10px;
    font-weight: 700;
  }

  td {
    padding: 0 5px;
  }

  .bd-t-s {
    border-top: 1px solid;
  }

  .bd-r-s {
    border-right: 1px solid;
  }

  .bd-b-s {
    border-bottom: 1px solid;
  }

  .bd-l-s {
    border-left: 1px solid;
  }

  .bd-t-dt {
    border-top: 1px dotted;
  }

  .bd-r-dt {
    border-right: 1px dotted;
  }

  .bd-b-dt {
    border-bottom: 1px dotted;
  }

  .bd-l-dt {
    border-left: 1px dotted;
  }

  .bd-t-db {
    position: relative;
  }
  .bd-t-db::before {
    content: '';
    position: absolute;
    top: 0;
    left: 0;
    width: 100%;
    height: 0;
    border-top: 3px double black;
    background: transparent;
    z-index: 1;
  }

  .center {
    text-align: center;
  }
</style>

<div id='page' class={className} style={styleName}>
  <table border-collapse="collapse" cellspacing="0" cellpadding="0" style="table-layout:fixed; width:0">
    <thead>
      <tr style="height: 0">
        <th style="width:70px"></th>
        <th style="width:45px"></th>
        <th style="width:155px"></th>
        <th style="width:70px"></th>
        <th style="width:70px"></th>
        <th style="width:130px"></th>
      </tr>
    </thead>
    <tbody>
      <tr style={rowHeight}>
        <td style="font-size:20px; line-height:20px; text-align:left;" colspan="3">{header.title[locale]}</td>
        <td></td>
        <td></td>
        <td style="text-align:right">{updatedAt.getString(locale)}</td>
      </tr>
      <tr style={rowHeight}>
        <td class="bd-t-s bd-l-s">
          <Twitter showIcon="True"/>
        </td>
        <td class="bd-t-s" colspan="2">
          <Twitter class="text-blue-600" showId="True">
        </td>
        <td class="bd-t-s bd-l-s">
          <GitHub showIcon="True"/>
        </td>
        <td class="bd-t-s bd-r-s" colspan="2">
          <GitHub class="text-blue-600" showId="True"/>
        </td>
      </tr>
      <tr style={rowHeight}>
        <td class="bd-t-s bd-l-s center">{header.year[locale]}</td>
        <td class="bd-t-s bd-l-dt center">{header.month[locale]}</td>
        <td class="bd-t-s bd-r-s bd-l-dt center" colspan="4">{header.belong[locale]}</td>
      </tr>
      <tr style={rowHeight}>
        <td class="bd-t-db bd-l-s center">2024</td>
        <td class="bd-t-db bd-l-dt center">9</td>
        <td class="bd-t-db bd-r-s bd-l-dt center" colspan="4">42Tokyo</td>
      </tr>
      <tr style={rowHeight}>
        <td class="bd-t-s bd-l-s center">2020</td>
        <td class="bd-t-s bd-l-dt center">4</td>
        <td class="bd-t-s bd-r-s bd-l-dt center" colspan="4">{locale==='jp'?'早稲田大学 社会科学部 社会科学科':'waseda univ.'}</td>
      </tr>
      <tr style={rowHeight}>
        <td class="bd-t-s bd-l-s center"></td>
        <td class="bd-t-s bd-l-dt center"></td>
        <td class="bd-t-s bd-r-s bd-l-dt center" colspan="4"></td>
      </tr>
      <tr style={rowHeight}>
        <td class="bd-t-s bd-l-s center">{header.year[locale]}</td>
        <td class="bd-t-s bd-l-dt center">{header.month[locale]}</td>
        <td class="bd-t-s bd-r-s bd-l-dt center" colspan="4">{header.educationCareer[locale]}</td>
      </tr>
      <tr style={rowHeight}>
        <td class="bd-t-db bd-l-s center"></td>
        <td class="bd-t-db bd-l-dt center"></td>
        <td class="bd-t-db bd-r-s bd-l-dt center" colspan="4">{header.education[locale]}</td>
      </tr>
      <tr style={rowHeight}>
        <td class="bd-t-dt bd-l-s center"></td>
        <td class="bd-t-dt bd-l-dt center"></td>
        <td class="bd-t-dt bd-r-s bd-l-dt center" colspan="4"></td>
      </tr>
      <tr style={rowHeight}>
        <td class="bd-t-s bd-l-s center"></td>
        <td class="bd-t-s bd-l-dt center"></td>
        <td class="bd-t-s bd-r-s bd-l-dt center" colspan="4">{header.career[locale]}</td>
      </tr>
      <tr style={rowHeight}>
        <td class="bd-t-dt bd-b-s bd-l-s center"></td>
        <td class="bd-t-dt bd-b-s bd-l-dt center"></td>
        <td class="bd-t-dt bd-r-s bd-b-s bd-l-dt" colspan="4"></td>
      </tr>
      <tr style={rowHeight}>
        <td class="bd-t-s bd-l-s center">{header.year[locale]}</td>
        <td class="bd-t-s bd-l-dt center">{header.month[locale]}</td>
        <td class="bd-t-s bd-r-s bd-l-dt center" colspan="4">{header.awardPunishment[locale]}</td>
      </tr>
      <tr style={rowHeight}>
        <td class="bd-t-db bd-l-s center"></td>
        <td class="bd-t-db bd-l-dt center"></td>
        <td class="bd-t-db bd-r-s bd-l-dt center" colspan="4"></td>
      </tr>
      <tr style={rowHeight}>
        <td class="bd-t-s bd-l-s center">{header.year[locale]}</td>
        <td class="bd-t-s bd-l-dt center">{header.month[locale]}</td>
        <td class="bd-t-s bd-r-s bd-l-dt center" colspan="4">{header.licenseQualification[locale]}</td>
      </tr>
      <tr style={rowHeight}>
        <td class="bd-t-db bd-l-s center">2022</td>
        <td class="bd-t-db bd-l-dt center">6</td>
        <td class="bd-t-db bd-r-s bd-l-dt" colspan="4">TOEIC 730</td>
      </tr>
      <tr style={rowHeight}>
        <td class="bd-t-s bd-l-s center"></td>
        <td class="bd-t-s bd-l-dt center"></td>
        <td class="bd-t-s bd-r-s bd-l-dt" colspan="4"></td>
      </tr>
      <tr style={rowHeight}>
        <td class="bd-t-s bd-r-s bd-l-s" colspan="6">{header.anythingelse[locale]}</td>
      </tr>
      <tr style={rowHeight}>
        <td class="bd-t-s bd-r-s bd-b-s bd-l-s" colspan="6" rowspan="3">
          <a class="text-blue-600" href="https://qiita.com/konpeito_morimori">qiita</a>
        </td>
      </tr>
      <tr style={rowHeight}>
      </tr>
      <tr style={rowHeight}>
      </tr>
    </tbody>
  </table>
</div>

<script>
  function scalePage() {
    const page = document.getElementById('page');
    if (!page) return;
    const scale = Math.min(window.innerWidth * 0.95 / page.offsetWidth, 1.1);
    page.style.transformOrigin = 'top';
    page.style.transform = `scale(${scale})`;
  }

  window.addEventListener('resize', scalePage);
  window.addEventListener('load', scalePage);
</script>